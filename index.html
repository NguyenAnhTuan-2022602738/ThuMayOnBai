<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Travel Vocabulary & Grammar Quiz</title>
  <style>
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial;
      margin: 24px;
      background: #f7fafc;
      color: #0f172a;
    }
    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .tab {
      padding: 8px 14px;
      border-radius: 6px;
      background: #e2e8f0;
      cursor: pointer;
      font-weight: 600;
      color: #334155;
    }
    .tab.active {
      background: #0ea5a4;
      color: #fff;
    }
    .unit {
      display: none;
    }
    .unit.active {
      display: block;
    }
    .question {
      background: #fff;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
      margin-bottom: 10px;
    }
    .qtext {
      font-weight: 600;
      margin-bottom: 6px;
    }
    input[type="text"] {
      padding: 8px;
      border: 1px solid #cbd5e1;
      border-radius: 6px;
      font-family: monospace;
    }
    .btns {
      margin: 14px 0;
    }
    button {
      background: #0ea5a4;
      color: white;
      padding: 10px 14px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }
    button.secondary {
      background: #64748b;
    }
    .result {
      margin-top: 16px;
      padding: 12px;
      border-radius: 8px;
    }
    .correct {
      background: #ecfdf5;
      color: #065f46;
    }
    .incorrect {
      background: #ffefef;
      color: #7f1d1d;
    }
    .explain {
      margin-top: 8px;
      padding: 10px;
      border-radius: 6px;
      background: #f1f5f9;
      color: #0f172a;
    }
    .bad {
      border-color: #f87171;
    }
    .good {
      border-color: #34d399;
    }
    .summary {
      font-weight: 700;
    }
    .wronglist {
      margin-top: 8px;
    }
    small.hint {
      color: #64748b;
    }
    footer {
      margin-top: 30px;
      color: #94a3b8;
    }
    .unit-btns {
      display: none;
    }
    .unit.active .unit-btns {
      display: block;
    }
    .blanks {
      display: inline-flex;
      gap: 2px;
    }
    .blanks span {
      border-bottom: 2px solid #000;
      width: 10px;
      display: inline-block;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Travel Vocabulary & Grammar Quiz</h1>
  <div class="tabs">
    <div class="tab active" data-unit="1">Vocabulary</div>
    <div class="tab" data-unit="2">Grammar</div>
  </div>

  <form id="quiz">
    <div id="unit1" class="unit active">
      <div class="unit-btns">
        <button type="button" class="submit-unit">Submit & Check</button>
        <button type="button" class="reset-unit secondary">Reset</button>
      </div>
      <div id="feedback1"></div>
    </div>
    <div id="unit2" class="unit">
      <div class="unit-btns">
        <button type="button" class="submit-unit">Submit & Check</button>
        <button type="button" class="reset-unit secondary">Reset</button>
      </div>
      <div id="feedback2"></div>
    </div>
  </form>
  <footer>Made for you — customizable as needed.</footer>

  <script>
    // Danh sách câu hỏi từ tất cả các bài trong hình ảnh
    let data = [
      // Vocabulary (Unit 1 - 30 câu, từ Task 1, Task 3 và bổ sung)
      {u:1,q:"The hotel staff will s _ _ _ _ food and drinks to your room.",a:["serve"],e:"'Serve' nghĩa là phục vụ đồ ăn/uống đến phòng."},
      {u:1,q:"Please r _ _ _ _ _ the laundry form after filling it.",a:["return"],e:"'Return' là trả lại phiếu giặt ủi."},
      {u:1,q:"The housekeeper will f _ _ _ o _ _ the wastebasket.",a:["fill out"],e:"'Fill out' là điền vào thùng rác."},
      {u:1,q:"Can you e _ _ _ _ the trash bin?",a:["empty"],e:"'Empty' là làm rỗng thùng rác."},
      {u:1,q:"Please k _ _ _ _ on the door.",a:["knock"],e:"'Knock' là gõ cửa."},
      {u:1,q:"The room needs to be c _ _ _ _ _ _ .",a:["cleaned"],e:"'Cleaned' là được dọn dẹp."},
      {u:1,q:"I need a t _ _ _ _ _ for my trip.",a:["ticket"],e:"'Ticket' là vé đi lại."},
      {u:1,q:"The hotel offers free w _ _ - f _ .",a:["wi-fi"],e:"'Wi-fi' là mạng không dây."},
      {u:1,q:"Please c _ _ _ _ _ _ _ your bags.",a:["check-in"],e:"'Check-in' là làm thủ tục nhận phòng."},
      {u:1,q:"The tour guide will e _ _ _ _ _ the history.",a:["explain"],e:"'Explain' là giải thích."},
      {u:1,q:"I booked a r _ _ _ for two nights.",a:["room"],e:"'Room' là phòng."},
      {u:1,q:"The flight was d _ _ _ _ _ _ .",a:["delayed"],e:"'Delayed' là bị hoãn."},
      {u:1,q:"We need a m _ _ for the city.",a:["map"],e:"'Map' là bản đồ."},
      {u:1,q:"The hotel has a r _ _ _ _ _ _ _ _ .",a:["restaurant"],e:"'Restaurant' là nhà hàng."},
      {u:1,q:"Please p _ _ _ your luggage.",a:["pack"],e:"'Pack' là đóng gói hành lý."},
      {u:1,q:"The staff will d _ _ _ _ _ _ the room.",a:["deliver"],e:"'Deliver' là giao phòng."},
      {u:1,q:"I need a t _ _ _ _ for the taxi.",a:["taxi"],e:"'Taxi' là xe taxi."},
      {u:1,q:"The hotel offers a b _ _ _ _ _ _ .",a:["buffet"],e:"'Buffet' là tiệc tự chọn."},
      {u:1,q:"Please f _ _ _ the form.",a:["fill"],e:"'Fill' là điền."},
      {u:1,q:"The view is b _ _ _ _ _ _ _ .",a:["beautiful"],e:"'Beautiful' là đẹp."},
      {u:1,q:"I need a k _ _ for the room.",a:["key"],e:"'Key' là chìa khóa."},
      {u:1,q:"The flight is on t _ _ _ .",a:["time"],e:"'Time' là đúng giờ."},
      {u:1,q:"We stayed at a h _ _ _ _ .",a:["hotel"],e:"'Hotel' là khách sạn."},
      {u:1,q:"The guide speaks e _ _ _ _ _ .",a:["english"],e:"'English' là tiếng Anh."},
      {u:1,q:"I need a p _ _ _ _ _ _ .",a:["passport"],e:"'Passport' là hộ chiếu."},
      {u:1,q:"The trip was e _ _ _ _ _ _ _ _ .",a:["exciting"],e:"'Exciting' là thú vị."},
      {u:1,q:"Please c _ _ _ _ your bill.",a:["pay"],e:"'Pay' là thanh toán."},
      {u:1,q:"The room has a b _ _ .",a:["bed"],e:"'Bed' là giường."},
      {u:1,q:"We took a b _ _ .",a:["bus"],e:"'Bus' là xe buýt."},
      {u:1,q:"The hotel is c _ _ _ _ .",a:["cheap"],e:"'Cheap' là rẻ."},

      // Grammar (Unit 2 - 30 câu, từ Task 4, Task 5, Task 6, Task 7 và bổ sung)
      {u:2,q:"Guest: May (A) I have an extra pair of slippers (B)? Receptionist: Of course, Miss. I'll be sending (C) them up without (D) delay. Error in _ _ _ _ _ . Correct to _ _ _ _ .",a:["C","send"],e:"'Sending' sai thì, sửa thành 'send'."},
      {u:2,q:"Guest: Could (A) you please change my bed sheets and emptying (B) the wastebasket? Error in _ _ _ _ _ . Correct to _ _ _ _ .",a:["B","empty"],e:"'Emptying' sai dạng, sửa thành 'empty'."},
      {u:2,q:"The sheets on my bed (not/change) _ _ _ _ _ _ _ _ _ _ _ _ _ for two days.",a:["have not changed"],e:"Dùng thì Present Perfect 'have not changed'."},
      {u:2,q:"The reception (inform) _ _ _ _ _ _ _ _ _ _ Mr. Johns for the past two years.",a:["has informed"],e:"Dùng thì Present Perfect 'has informed'."},
      {u:2,q:"Well, the minibar isfully(A) stocked, but some bottleshave(B) been filled with something other than alcohol. Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","is fully"],e:"'isfully' thiếu khoảng cách, sửa thành 'is fully'."},
      {u:2,q:"A previous guestshould(C) have poured out the contents and filled the bottleswith(D) something less expensive. Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["C","guest should"],e:"'guestshould' thiếu khoảng cách, sửa thành 'guest should'."},
      {u:2,q:"I am verydisappointed(A) when going into my room. It is(B) very filthy, the bathhave not cleaned(C) and the sheetshave not been changed(D). Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","very disappointed"],e:"'verydisappointed' thiếu khoảng cách, sửa thành 'very disappointed'."},
      {u:2,q:"Ido(A) apologizeto(B) this problem and I rest assured(C) that this problemwill never happen(D) again in our hotel. Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","I do"],e:"'Ido' thiếu khoảng cách, sửa thành 'I do'."},
      {u:2,q:"Our managerwill check(A) if housekeepinghad finished(B) servicing(C) your roomyet(D). Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","manager will check"],e:"'managerwill check' thiếu khoảng cách, sửa thành 'manager will check'."},
      {u:2,q:"Marywould like(A) tocomplain(B) with(C) our manager but heis on business(D) abroad. Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","Mary would like"],e:"'Marywould like' thiếu khoảng cách, sửa thành 'Mary would like'."},
      {u:2,q:"After a long(A) flight, we need asnack(B) because we did not eat(C) anythingsince(D) yesterday evening. Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["B","a snack"],e:"'asnack' thiếu khoảng cách, sửa thành 'a snack'."},
      {u:2,q:"A: What kinds of (A) things do you want to do on (B) your holiday? B: I'm interested at (C) scuba diving... Error in _ _ _ _ _ . Correct to _ _ _ .",a:["C","in"],e:"'At' sai giới từ, sửa thành 'in'."},
      {u:2,q:"The hotel (provide) _ _ _ _ _ _ _ _ _ _ free breakfast every morning.",a:["provides"],e:"Dùng thì Present Simple 'provides'."},
      {u:2,q:"We (stay) _ _ _ _ _ _ _ _ _ _ in this hotel for three days.",a:["have stayed"],e:"Dùng thì Present Perfect 'have stayed'."},
      {u:2,q:"The staff (clean) _ _ _ _ _ _ _ _ _ _ the room since yesterday.",a:["have cleaned"],e:"Dùng thì Present Perfect 'have cleaned'."},
      {u:2,q:"She (book) _ _ _ _ _ _ _ _ _ _ a room for next week.",a:["has booked"],e:"Dùng thì Present Perfect 'has booked'."},
      // Bổ sung thêm Grammar để đạt 30 câu
      {u:2,q:"The room (not/clean) _ _ _ _ _ _ _ _ _ _ _ _ _ since last week.",a:["has not been cleaned"],e:"Dùng thì Present Perfect Passive 'has not been cleaned'."},
      {u:2,q:"They (arrive) _ _ _ _ _ _ _ _ _ _ at the hotel an hour ago.",a:["arrived"],e:"Dùng thì Past Simple 'arrived'."},
      {u:2,q:"The manager (check) _ _ _ _ _ _ _ _ _ _ the report yesterday.",a:["checked"],e:"Dùng thì Past Simple 'checked'."},
      {u:2,q:"We (plan) _ _ _ _ _ _ _ _ _ _ our trip for months.",a:["have planned"],e:"Dùng thì Present Perfect 'have planned'."},
      {u:2,q:"The guests (request) _ _ _ _ _ _ _ _ _ _ an early check-in. Error in _ _ _ _ _ . Correct to _ _ _ _ .",a:["A","requested"],e:"Câu sai thì, sửa 'request' thành 'requested'."},
      {u:2,q:"The serviceis(A) excellent, but the roomwas(B) not readywhenwe(C) arrived(D). Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["B","was"],e:"'was' đúng, nhưng cần kiểm tra ngữ cảnh, giữ nguyên."},
      {u:2,q:"Heis(A) alwayscomplaining(B) about the foodhere(C) at the hotel(D). Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","He is"],e:"'Heis' thiếu khoảng cách, sửa thành 'He is'."},
      {u:2,q:"The tourguidewill explain(A) the historyofthe(B) citytomorrow(C) morning(D). Error in _ _ _ _ _ . Correct to _ _ _ _ _ .",a:["A","guide will explain"],e:"'tourguidewill' thiếu khoảng cách, sửa thành 'guide will explain'."},
      {u:2,q:"We (enjoy) _ _ _ _ _ _ _ _ _ _ the view from the balcony every day.",a:["enjoy"],e:"Dùng thì Present Simple 'enjoy'."},
      {u:2,q:"They (not/visit) _ _ _ _ _ _ _ _ _ _ _ _ _ the museum yet.",a:["have not visited"],e:"Dùng thì Present Perfect 'have not visited'."},
      {u:2,q:"The chef (prepare) _ _ _ _ _ _ _ _ _ _ a special meal tonight.",a:["is preparing"],e:"Dùng thì Present Continuous 'is preparing'."},
      {u:2,q:"The flight (delay) _ _ _ _ _ _ _ _ _ _ due to bad weather.",a:["was delayed"],e:"Dùng thì Past Simple Passive 'was delayed'."},
      {u:2,q:"She (call) _ _ _ _ _ _ _ _ _ _ the reception five minutes ago.",a:["called"],e:"Dùng thì Past Simple 'called'."},
      {u:2,q:"We (wait) _ _ _ _ _ _ _ _ _ _ for the bus since morning.",a:["have been waiting"],e:"Dùng thì Present Perfect Continuous 'have been waiting'."},
      {u:2,q:"The hotel (offer) _ _ _ _ _ _ _ _ _ _ free Wi-Fi to all guests.",a:["offers"],e:"Dùng thì Present Simple 'offers'."},
      {u:2,q:"They (not/pay) _ _ _ _ _ _ _ _ _ _ _ the bill yet.",a:["have not paid"],e:"Dùng thì Present Perfect 'have not paid'."},
      {u:2,q:"The room (clean) _ _ _ _ _ _ _ _ _ _ every day by the staff.",a:["is cleaned"],e:"Dùng thì Present Simple Passive 'is cleaned'."},
      {u:2,q:"He (work) _ _ _ _ _ _ _ _ _ _ as a receptionist for two years.",a:["has worked"],e:"Dùng thì Present Perfect 'has worked'."}
    ];

    // Trộn câu hỏi mỗi khi load
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Trộn data cho từng unit
    const data1 = shuffle(data.filter(item => item.u === 1));
    const data2 = shuffle(data.filter(item => item.u === 2));

    // Ghép lại data theo unit đã trộn
    data = [...data1, ...data2];

    function makeInput(answer, blanks) {
      let len = answer[0].replace(/\s|-|'|\./g,'').length;
      return blanks + `<input type="text" size="${len}" data-ans="${answer.join('|')}" />`;
    }

    function generateBlanks(q, a) {
      const blankMatch = q.match(/(_ \_*)/g) || [];
      return blankMatch.join(' ');
    }

    // Render questions
    const units = {1: document.getElementById('unit1'), 2: document.getElementById('unit2')};
    data.forEach((item, i) => {
      const wrap = document.createElement('div');
      wrap.className = 'question';
      const blanks = generateBlanks(item.q, item.a);
      const qText = item.q.replace(/(_ \_*)/g, '<span class="blanks"></span>');
      wrap.innerHTML = `<div class='qtext'>#${i+1}. ${item.q.replace(/_/g, '<span>_</span>')}</div>${makeInput(item.a, '')}`;
      units[item.u].insertBefore(wrap, units[item.u].querySelector('.unit-btns'));
    });

    function normalize(s) { return s.toLowerCase().trim(); }
    function checkAnswer(g, answers) {
      const val = normalize(g);
      return answers.some(a => normalize(a) === val || normalize(a).replace(/\s+/g, '') === val.replace(/\s+/g, ''));
    }

    document.querySelectorAll('.submit-unit').forEach(btn => {
      btn.addEventListener('click', () => {
        const unitId = btn.closest('.unit').id.replace('unit', '');
        const inputs = document.querySelectorAll(`#unit${unitId} input[type=text]`);
        const feedback = document.getElementById(`feedback${unitId}`);
        let correct = 0; let wrongs = [];
        inputs.forEach((inp, idx) => {
          const ans = inp.dataset.ans.split('|');
          const item = data.filter(d => d.u == unitId)[idx];
          if (checkAnswer(inp.value, ans)) {
            inp.classList.add('good'); inp.classList.remove('bad'); correct++;
          } else { inp.classList.add('bad'); inp.classList.remove('good'); wrongs.push({i: idx+1, given: inp.value, correct: ans[0], explain: item.e}); }
        });
        feedback.innerHTML = `<div class='result ${wrongs.length ? "incorrect" : "correct"}'><div class='summary'>You got ${correct}/${inputs.length} correct</div></div>`;
        if (wrongs.length) {
          wrongs.forEach(w => {
            feedback.innerHTML += `<div class='explain'>Question ${w.i}: you entered "${w.given || '(blank)'}" ; correct: ${w.correct}. Explanation: ${w.explain}</div>`;
          });
        }
      });
    });

    document.querySelectorAll('.reset-unit').forEach(btn => {
      btn.addEventListener('click', () => {
        const unitId = btn.closest('.unit').id.replace('unit', '');
        document.querySelectorAll(`#unit${unitId} input[type=text]`).forEach(inp => { inp.value = ''; inp.classList.remove('good', 'bad'); });
        document.getElementById(`feedback${unitId}`).innerHTML = '';
      });
    });

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.unit').forEach(u => u.classList.remove('active'));
        document.getElementById('unit' + tab.dataset.unit).classList.add('active');
      });
    });
  </script>
</body>
</html>